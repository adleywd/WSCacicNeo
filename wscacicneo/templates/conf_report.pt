<metal:main use-macro="load: master.pt">
  <metal:content fill-slot="dash">
      Relatórios      
  </metal:content>
	<metal:content fill-slot="conteudo">
        <div class="padd">
            <br />
            <!-- Form starts.  -->
             <form class="form-horizontal" role="form">
                <div class="form-group">
                  <label class="col-lg-2 control-label">Órgão</label>
                  <div class="col-lg-2">
                    <select  id="orgao" class="form-control">
                      <option></option>
                      <option tal:repeat="doc orgao_doc" value="${doc.nome}">${doc.pretty_name}</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 control-label">Item</label>
                  <div class="col-lg-2">
                    <select id="coleta" class="form-control">
                      <option></option>
                      <option value="processador">Processador</option>
                      <option value="hd">HD</option>
                      <option value="bios">BIOS</option>
                      <option value="memoria">Memoria</option>
                      <option value="so">Sistemas Operacionais</option>
                      <option value="software">Software (Suítes de Escritório)</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-lg-offset-2 col-lg-6">
                    <button type="button" id="enviar" class="btn btn-sm" style="margin-left: 105px;" >Enviar</button>
                  </div>
                </div>
              </form>
          </div>
	</metal:content>
	<metal:content fill-slot="javascript">
        <script type="text/javascript">
           $('#enviar').click(function(){
                orgao = $('#orgao').val()
                attr = $('#coleta').val()
                if(attr == 'hd'){
                    attr = 'win32_logicaldisk'
                    item = 'win32_logicaldisk_caption'
                }
                else if(attr == 'bios'){
                    attr = 'win32_bios'
                    item = "win32_bios_manufacturer"
                }
                else if(attr == 'so'){
                    attr = 'operatingsystem'
                    item = 'operatingsystem_caption'
                }
                else if(attr == 'memoria'){
                    attr = 'win32_physicalmemory' 
                    item = 'win32_physicalmemory_memorytype' 
                }
                else if(attr == 'processador'){
                    attr = 'win32_processor'
                    item = 'win32_processor_manufacturer'
                }
                else if(attr == 'software'){
                    window.location = "${request.route_url('root')}relatorio/software/"+orgao+""
                }
                else{
                    alert('Selecione o Item da coleta')
                    
                    return True
                }
                window.location = "${request.route_url('root')}relatorio/"+orgao+"/"+attr+"/"+item+""
           });
        </script>
    </metal:content>
</metal:main>
