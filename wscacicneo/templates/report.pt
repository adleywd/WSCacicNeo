<metal:main use-macro="load: master.pt">
    <metal:content fill-slot="dash">
      Relatórios      
  </metal:content>
  <metal:content fill-slot="conteudo">
    <div class="matter">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="widget" id="tabela_relatorio">
                        <div class="widget-head">
                            <div class="pull-left">Relatório</div>
                            <div class="widget-icons pull-right">
                                <a href="#" id="print" title="Imprimir Tabela"><i class="fa fa-print"></i></a>
                                <a href="${request.route_url('root')}graficos/}${request.matchdict['nm_orgao']}/${request.matchdict['attr']}" id="grafico" title="Gerar Gráfico"><i class="fa fa-bar-chart-o"></i></a>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="widget-content">
                            <div class="padd">
                                <div class="page-tables">
                                    <div class="table-responsive ">
                                        <table class="table table-condensed table-bordered table-hover no-margin">
                                            <thead>
                                                <tr class="info">
                                                    <th>Item</th>
                                                    <th>Quantidade</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="active" tal:repeat="k data.keys()">
                                                    <td>${k}</td>
                                                    <td tal:content="data[k]"></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                <div class="box-chart">
                    <canvas id="GraficoLine" style="width:100%;"></canvas>
                </div>
        </div>
   </div>
</metal:content>
<metal:content fill-slot="javascript">
    <script type="text/javascript" src="${request.route_url('root')}static/jquery.print.js"></script>
    <script type="text/javascript">
        $(function() {
            $("#print").click(function() {
                $("#tabela_relatorio").print();
            });
        });
        $(document).ready(function(){
            window.onload = function(){
                var ctx = document.getElementById("GraficoLine").getContext("2d");
                var data = {
                    labels: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
                    datasets: [
                        {
                            label: "Dados primários",
                            fillColor: "rgba(220,220,220,0.2)",
                            strokeColor: "rgba(220,220,220,1)",
                            pointColor: "rgba(220,220,220,1)",
                            pointStrokeColor: "#fff",
                            pointHighlightFill: "#fff",
                            pointHighlightStroke: "rgba(220,220,220,1)",
                            data: [randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor()]
                        },
                        {
                            label: "Dados secundários",
                            fillColor: "rgba(151,187,205,0.2)",
                            strokeColor: "rgba(151,187,205,1)",
                            pointColor: "rgba(151,187,205,1)",
                            pointStrokeColor: "#fff",
                            pointHighlightFill: "#fff",
                            pointHighlightStroke: "rgba(151,187,205,1)",
                            data: [28, 48, 40, 19, 86, 27, 90, 200, 87, 20, 50, 20]
                        }
                    ]   
                };
                var LineChart = new Chart(ctx).Line(data, options);
                var options = {
                    responsive:true
                };

            };
        });
    </script>
</metal:content>
</metal:main>
