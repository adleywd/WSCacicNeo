<metal:main use-macro="load: master.pt">
    <metal:content fill-slot="dash">
      Cadastrar Notificação     
    </metal:content>
    <metal:content fill-slot="conteudo">
       <div class="alert alert-warning">
           Os campos marcados com  *  são de preenchimento obigatório
       </div>
        <div class="widget-content">
            <div class="padd">
                <form class="form-horizontal" style="margin-top: 20px;" role="form">
                    <div class="form-group">
                        <label class="col-lg-2 control-label">* Órgão:</label>
                        <div class="col-lg-2">
                            <select  id="orgao" class="form-control">
                                <option></option>
                                <option tal:repeat="doc orgao_doc">${doc.nome}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-2 control-label">* Data Notificação:</label>
                            <div class="col-lg-2">
                                <input type="date" id="data_coleta" class="form-control" >
                            </div>
                    </div>
                    <div class="form-group">
                      <label class="col-lg-2 control-label">* Notificação:</label>
                      <div class="col-lg-2">
                        <select id="notify" class="form-control">
                          <option>Erro na Coleta</option>
                          <option>Coleta Dezatualizada</option>
                        </select>
                      </div>
                    </div>
                        <div class="form-group">
                        <label class="col-lg-2 control-label">Comentario:</label>
                        <div class="col-lg-5">
                            <textarea class="form-control" id="coment" rows="5" placeholder="Comentario" style="margin: 0px -57.671875px 0px 0px; width: 423px; height: 104px;"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-lg-offset-2 col-lg-6">
                            <button type="button" id="enviar" class="btn btn-sm btn-default">Enviar</button>
                            <button type="button" class="btn btn-sm btn-default">Cancelar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </metal:content>
    <metal:content fill-slot="javascript">
        <script type="text/javascript">
            $('#enviar').click(function(){
                var data = {
                   'orgao' : $('#orgao').val(),
                    'data_coleta' : $('#data_coleta').val(),
                    'notify' : $('#notify').val(),
                    'coment' : $('#coment').val(),
                    'status' : 'Não Vizualizado'
                };
                $.ajax({
                        type: "POST",
                        url: "${request.route_url('root')}post_notify",
                        data: data, 
                        success: function(){ alert('Sucesso'), window.location.href = "${request.route_url('home')}"; },
                        error: function(){ alert('Não foi desta vez Tente novamente mais tarde') },
               });
            });
        </script>
    </metal:content>
</metal:main>
